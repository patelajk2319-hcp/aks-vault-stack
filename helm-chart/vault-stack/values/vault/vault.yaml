# =============================================================================
# HashiCorp Vault Enterprise Configuration
# Official Helm chart values for Vault deployment
# License will be created by Terraform from .env file
# =============================================================================

global:
  enabled: true
  namespace: vault

server:
  image:
    repository: "hashicorp/vault-enterprise"
    tag: "1.20.0-ent"
    pullPolicy: IfNotPresent

  enterpriseLicense:
    secretName: vault-license
    secretKey: license

  # Resource limits
  resources:
    requests:
      memory: 512Mi
      cpu: 250m
    limits:
      memory: 1Gi
      cpu: 500m

  # Data storage configuration
  dataStorage:
    enabled: true
    size: 10Gi
    storageClass: null  # Use default storage class

  # Audit storage for persistent audit logs
  # NOTE: Audit logs are stored in /vault/data/audit.log (on dataStorage volume)
  # even if auditStorage is disabled. Enable auditStorage for dedicated volume.
  auditStorage:
    enabled: true
    size: 5Gi
    storageClass: null  # Use default storage class

  # Single replica configuration for demo/testing
  # HA disabled to reduce costs
  ha:
    enabled: false

  # Standalone configuration
  standalone:
    enabled: true
    config: |
      ui = true

      # Log level: trace, debug, info, warn, error
      # Default is info - set to debug for detailed operational logs
      log_level = "info"

      listener "tcp" {
        tls_disable = 1
        address = "[::]:8200"
        cluster_address = "[::]:8201"
      }

      storage "file" {
        path = "/vault/data"
      }

      telemetry {
        disable_hostname = true
        prometheus_retention_time = "12h"
        unauthenticated_metrics_access = true
      }

ui:
  enabled: true

injector:
  enabled: false
